要保证消息不会重复消费，需要保证消息消费时的幂等性。  
幂等性：无论重复请求多少次，得到的结果都一样。  

**如何保证呢？**  
（1）写数据时，先根据主键查询数据库中是否存在，若存在则update；  
（2）数据库的唯一键约束；  
